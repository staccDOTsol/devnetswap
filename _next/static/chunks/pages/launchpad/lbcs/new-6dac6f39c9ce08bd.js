(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[196],{88157:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/launchpad/lbcs/new",function(){return t(58049)}])},58049:function(e,n,t){"use strict";t.r(n),t.d(n,{NewLBC:function(){return F},default:function(){return U}});var i=t(52322),r=t(59141),s=t(92021),a=t.n(s),o=t(87653),c=t(73955),l=t(54082),u=t(56752),h=t(88513),d=t(95496),m=t(9535),p=t(28392),y=t(72919),b=t(62981),f=t(27158),g=t(84761),x=t(31186),v=t(62197),w=t.n(v),M=t(74022),k=t(5632),j=t(2784),C=t(11929),I=t(32439),P=t(65413),T=t(99684),S=t(30884),_=t(69227),N=t(75109),E=t(94948),O=t(87892),A=t(9031),K=t(96822),B=t(37763);function D(e,n,t,i,r,s,a){try{var o=e[s](a),c=o.value}catch(l){return void t(l)}o.done?n(c):Promise.resolve(c).then(i,r)}function L(e){return function(){var n=this,t=arguments;return new Promise((function(i,r){var s=e.apply(n,t);function a(e){D(s,i,r,a,o,"next",e)}function o(e){D(s,i,r,a,o,"throw",e)}a(void 0)}))}}function q(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){q(e,n,t[n])}))}return e}var z=P.object({mint:P.string().required(),useExistingMint:P.boolean(),useCandyMachine:P.boolean(),existingMint:P.string().when(["useExistingMint","useCandyMachine"],{is:function(e,n){return e&&!n},then:P.string().required()}),candyMachineId:P.string().when("useCandyMachine",{is:!0,then:P.string().required()}),image:P.mixed(),name:P.string().when(["useExistingMint","useCandyMachine"],{is:function(e,n){return!e&&!n},then:P.string().required().min(2)}),description:P.string(),symbol:P.string().when("useExistingMint",{is:!1,then:P.string()}),authority:P.string().required(),startPrice:P.number().min(0).required(),minPrice:P.number().min(0).required(),interval:P.number().min(0).required(),decimals:P.number().nullable().transform((function(e){return""===e||isNaN(e)?null:e})).when(["useExistingMint","useCandyMachine"],{is:function(e,n){return!e&&!n},then:P.number().min(0).required()}),mintCap:P.number().min(1).required(),goLiveDate:P.date().required(),disclosures:_._});function H(e,n){return V.apply(this,arguments)}function V(){return(V=L(a().mark((function e(n,t){var i,r,s,o,c,l,u,h,d,b,g,x,v,k,j,C,I,P,T;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=f.Keypair.generate(),r=new f.PublicKey(t.authority),s=new f.PublicKey(t.mint),!t.useExistingMint||t.useCandyMachine){e.next=12;break}return c=new f.PublicKey(t.existingMint),e.next=8,(0,M.getMintInfo)(n.provider,c);case 8:t.decimals=e.sent.decimals,o=new m.DataV2({name:t.name||"",symbol:t.symbol||"",uri:t.uri||"",sellerFeeBasisPoints:0,creators:null,collection:null,uses:null}),e.next=20;break;case 12:if(!t.useCandyMachine){e.next=16;break}o=new m.DataV2({name:"Candymachine Mint Token",symbol:"MINT",uri:"",sellerFeeBasisPoints:0,creators:null,collection:null,uses:null}),e.next=20;break;case 16:return e.next=18,n.tokenMetadataSdk.uploadMetadata({provider:t.provider,name:t.name,symbol:t.symbol||"",description:t.description,image:t.image,mint:i.publicKey});case 18:l=e.sent,o=new m.DataV2({name:t.name.substring(0,32),symbol:(t.symbol||"").substring(0,10),uri:l,sellerFeeBasisPoints:0,creators:null,collection:null,uses:null});case 20:return e.next=22,n.createLiquidityBootstrapperInstructions({targetMintKeypair:i,authority:r,metadata:o,baseMint:s,startPrice:Number(t.startPrice),minPrice:Number(t.minPrice),interval:Number(t.interval),maxSupply:Number(t.mintCap),bondingArgs:{targetMintDecimals:Number(t.decimals||0),goLiveDate:t.goLiveDate}});case 22:if(u=e.sent,h=u.output.targetMint,d=u.instructions,b=u.signers,!t.useExistingMint||t.useCandyMachine){e.next=32;break}return e.next=29,n.createRetrievalCurveForSetSupplyInstructions({reserveAuthority:r,supplyMint:new f.PublicKey(t.existingMint),supplyAmount:t.mintCap,targetMint:h});case 29:g=e.sent,d.push(g.instructions),b.push(g.signers);case 32:if(!t.useCandyMachine){e.next=52;break}return x=new f.PublicKey(t.candyMachineId),v=new f.PublicKey("1nc1nerator11111111111111111111111111111111"),e.next=37,y.Token.getAssociatedTokenAddress(y.ASSOCIATED_TOKEN_PROGRAM_ID,y.TOKEN_PROGRAM_ID,h,v,!0);case 37:return k=e.sent,(j=d[d.length-1]).push(y.Token.createAssociatedTokenAccountInstruction(y.ASSOCIATED_TOKEN_PROGRAM_ID,y.TOKEN_PROGRAM_ID,h,k,v,n.provider.wallet.publicKey)),e.next=42,p.Program.fetchIdl(new f.PublicKey("cndy3Z4yapfJBmL3ShUp5exZKqR3z33thTzeNMm2gRZ"),n.provider);case 42:return C=e.sent,I=new p.Program(C,new f.PublicKey("cndy3Z4yapfJBmL3ShUp5exZKqR3z33thTzeNMm2gRZ"),n.provider),e.next=46,I.account.candyMachine.fetch(x);case 46:return P=e.sent,e.next=49,I.instruction.updateCandyMachine(R({},P.data,{price:new(w())(1)}),{accounts:{candyMachine:x,authority:n.provider.wallet.publicKey,wallet:k}});case 49:(T=e.sent).keys.push({pubkey:h,isWritable:!1,isSigner:!1}),j.push(T);case 52:return e.next=54,(0,M.sendMultipleInstructions)(n.tokenBondingSdk.errors||new Map,n.provider,d,b);case 54:return e.abrupt("return",h);case 55:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=function(){var e=(0,I.cI)({resolver:(0,d.X)(z),defaultValues:{useExistingMint:!0}}),n=e.register,t=e.handleSubmit,r=e.watch,s=e.setValue,m=e.formState,p=m.errors,f=m.isSubmitting,v=(0,b.useWallet)(),w=v.publicKey,M=v.connected,P=(0,B.hB)(),D=P.visible,q=P.setVisible,V=(0,x.usePrimaryClaimedTokenRef)(w).info,Z=(0,x.useProvider)().awaitingApproval,F=(0,C.useAsyncCallback)(H),U=F.execute,W=F.loading,G=F.error,J=(0,T.T7)().marketplaceSdk,X=(0,k.useRouter)(),Y=r(),Q=Y.authority,$=(Y.mint,Y.useExistingMint),ee=Y.useCandyMachine;(0,j.useEffect)((function(){s("useCandyMachine",!!X.query.candymachine)}),[X,s]);var ne=L(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(J,n);case 2:t=e.sent,n.useCandyMachine?X.push((0,S.B)(S._.mintLbc,{candyMachineId:n.candyMachineId}),void 0,{shallow:!0}):X.push((0,S.B)(S._.tokenLbc,{mintKey:t.toBase58()}),void 0,{shallow:!0});case 4:case"end":return e.stop()}}),e)}))),te=n("authority");return(0,i.jsxs)(o.kC,{position:"relative",children:[!M&&(0,i.jsxs)(o.kC,{position:"absolute",w:"full",h:"full",zIndex:"1",flexDirection:"column",children:[(0,i.jsx)(o.kC,{justifyContent:"center",children:(0,i.jsx)(c.zx,{colorScheme:"orange",variant:"outline",onClick:function(){return q(!D)},children:"Connect Wallet"})}),(0,i.jsx)(o.kC,{w:"full",h:"full",bg:"white",opacity:"0.6"})]}),(0,i.jsx)(I.RV,R({},e,{children:(0,i.jsx)("form",{onSubmit:t(ne),children:(0,i.jsxs)(o.gC,{spacing:8,mt:M?0:12,children:[!ee&&(0,i.jsx)(K.g,{}),(0,i.jsxs)(o.xu,{w:"full",children:[(0,i.jsx)(l.UO,{in:ee,animateOpacity:!0,children:(0,i.jsx)(N.H,{id:"candyMachineId",help:"The id of the candymachine",label:"Candy Machine ID",errors:p,children:(0,i.jsx)(u.II,R({},n("candyMachineId")))})}),(0,i.jsx)(l.UO,{in:!$&&!ee,animateOpacity:!0,children:(0,i.jsxs)(o.gC,{spacing:8,children:[(0,i.jsx)(A.c,{entityName:"token"}),(0,i.jsx)(N.H,{id:"decimals",help:"The number of of decimal places this mint will have. For example, SOL has 9 decimal places of precision. We recommend 0 if your tokens dont need to be less than 1",label:"Mint Decimals",errors:p,children:(0,i.jsx)(u.II,R({type:"number",min:0,step:1e-12},n("decimals")))}),(0,i.jsx)(N.H,{id:"symbol",help:"A less than 10 character symbol for the token being sold",label:"Symbol",errors:p,children:(0,i.jsx)(u.II,R({},n("symbol")))})]})})]}),(0,i.jsxs)(N.H,{id:"mint",help:"The token that should be used to buy this token. If you want users to purchase your token using SOL, use ".concat(y.NATIVE_MINT.toBase58()),label:"Purchase Mint",errors:p,children:[V&&(0,i.jsx)(c.zx,{variant:"link",onClick:function(){return s("mint",V.mint.toBase58())},children:"Use my Social Token"}),(0,i.jsx)(E.J,{value:r("mint"),onChange:function(e){return s("mint",e)}})]}),(0,i.jsxs)(N.H,{id:"authority",help:"The wallet that can claim the bootstrapped liquidity",label:"Beneficiary",errors:p,children:[w&&(0,i.jsx)(c.zx,{variant:"link",onClick:function(){return s("authority",w.toBase58())},children:"Set to My Wallet"}),(0,i.jsx)(O.y,{name:te.name,value:Q,onChange:te.onChange})]}),(0,i.jsx)(N.H,{id:"startPrice",help:"The starting price for this token. You should set this a little above the expected price of the token. Prices will fall to the fair price. Note that if there's enough demand, they can also increase from this price.",label:"Starting Price",errors:p,children:(0,i.jsx)(u.II,R({type:"number",min:0,step:1e-12},n("startPrice")))}),(0,i.jsx)(N.H,{id:"minPrice",help:"The minimum possible price for this token, if nobody buys during the bootstrapping interval. The wider the range between starting price and minimum price, the more rapidly the price will fall. It is reccommended to keep these numbers within 5x of each other.",label:"Minimum Price",errors:p,children:(0,i.jsx)(u.II,R({type:"number",min:0,step:1e-12},n("minPrice")))}),(0,i.jsx)(N.H,{id:"interval",help:"The time in seconds that it will take to go from startPrice to minPrice",label:"Interval",errors:p,children:(0,i.jsx)(u.II,R({type:"number",min:0,step:1e-12},n("interval")))}),(0,i.jsx)(N.H,{id:"mintCap",help:"The number of tokens to mint. Note that, depending on the above parameters this liqudity bootstrapping may not sell out",label:"Number of Tokens",errors:p,children:(0,i.jsx)(u.II,R({type:"number",min:0,step:1e-12},n("mintCap")))}),(0,i.jsx)(N.H,{id:"goLiveDate",help:"The time this LBC will go live, in your browser's local timezone",label:"Launch Date",errors:p,children:(0,i.jsx)(u.II,R({type:"datetime-local"},n("goLiveDate")))}),(0,i.jsx)(_.M,{fees:g.LBC_CURVE_FEES}),G&&(0,i.jsx)(h.bZ,{status:"error",children:G.toString()}),(0,i.jsx)(c.zx,{type:"submit",alignSelf:"flex-end",colorScheme:"primary",isLoading:f||W,loadingText:Z?"Awaiting Approval":"Loading",children:"Create LBC"})]})})}))]})},F=function(){return(0,i.jsx)(r.Y,{title:"New LBC",children:(0,i.jsx)(Z,{})})},U=F}},function(e){e.O(0,[774,888,179],(function(){return n=88157,e(e.s=n);var n}));var n=e.O();_N_E=n}]);